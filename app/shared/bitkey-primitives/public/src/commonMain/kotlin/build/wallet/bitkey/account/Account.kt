package build.wallet.bitkey.account

import build.wallet.bitkey.app.AppRecoveryAuthPublicKey
import build.wallet.bitkey.f8e.AccountId

sealed interface Account {
  /**
   * ID of this account, generated by f8e during account creation.
   */
  val accountId: AccountId

  /**
   * Environment configuration for this account.
   */
  val config: AccountConfig
}

fun Account.requireAppRecoveryAuthKey(): AppRecoveryAuthPublicKey =
  when (this) {
    is FullAccount -> keybox.activeAppKeyBundle.recoveryAuthKey
    is LiteAccount -> recoveryAuthKey
  }
